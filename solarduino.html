<!DOCTYPE html>
<html lang="fr">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>
    Le solaire thermique
  </title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="./assets/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href='./assets/style.css'>
  <link rel='icon' type='image/x-icon' href='./assets/images/favicon.png'>
  <script type="text/javascript" src="./assets/bootstrap.min.js"></script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({ "HTML-CSS": { scale: 80 }});
  </script>
  <script type="text/javascript" src="./assets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/javascript" src="./assets/datamaps.world.min.js"></script>

</head>

<body>
  <div id="warning">
    <p>Avertissement : Le site est en cours de construction. Il sera complété sous peu.</p>
  </div>
  <div id="wrap">
    <div id='masthead'>
      <div class='container'>
        <div class='row'>
          <div class='col-sm-12'>
            <div class='masthead-inner'>
              <ul class='list-unstyled' id='top-menu'>
                <li class=''>
                  <a class='' href='./index.html'>Accueil</a>
                </li>
                <li class=''>
                  <a class='' href="./poeles_de_masse.html">Les poêles de masse</a>
                </li>
                <li class='active'>
                  <a class='active' href="./solaire_thermique.html">Le solaire thermique</a>
                </li>
                <li class=''>
                  <a class='' href='./a_propos.html'>À propos</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="container" id="main"> -->
    <div class="container">
      <div class="row">

        <!-- </div> -->
        <!-- <div class="row"> -->
        <div class="col-sm-10">
          <div class="shadow-box">

            <div class="title-box">
              <h2>Le Solarduino : une régulation open-source</h2>
            </div>
            <div class="content-box">
              <div class="row">
                <div class="col-sm-12">
                  <h2>Plan</h2>
                  <div id="TOC">
                    <ol>
                      <li><a href="#a_quoi">À quoi sert une régulation ?</a></li>
                      <li><a href="#solarduino">Le Solarduino</a></li>
                      <li><a href="#sch">Le schéma</a></li>
                      <li><a href="#choix">Les choix constructifs</a></li>
                    </ol>
                  </div>
                </div>
              </div>

              <div>
                <h2>
                  <a name="a_quoi"></a>À quoi sert une régulation ?</h2>
                <hr>
                <p>Le régulateur est indispensable. Sans lui, le circulateur fonctionnerait en permanence. C'est-à-dire que la chaleur accumulée dans le ballon de stockage serait dissipée dans les capteurs durant la nuit où pendant un épisode nuageux.</p>
                <ul class="row gallery">
                  <li class="col-xs-12">
                    <img class="img-responsive" src="./assets/images/SST_romans_sur_isere.svg">
                    <p class="subtitle">Figure : Schéma d'un SST controlé par une régulation.</p>
                  </li>
                </ul>
                <p>Le régulateur doit enclencher le fonctionnement du circulateur lorsque la différence de température entre le fluide en sortie du champ de capteurs et l'eau dans le ballon de stockage est suffisante pour qu'il y ait un échange thermique
                  efficace (en général, on prend une différence de température égale à 10°C), d'où le nom de régulation différentielle. Il faut aussi que le régulateur prenne en compte un hystérésis (c'est-à-dire qu'il attend que la température diminue
                  jusqu'à 5°C environ avant de relancer le circulateur) pour que le circulateur ne soit pas arrêté et remis en marche trop souvent.</p>
                <p>Au delà de ce principe de base, une régulation doit prendre en compte plusieurs autres paramètres, surtout lorsque le système se complexifie : plusieurs champs de capteurs, plusieurs cumulus, des planchers solaires directs, etc..</p>
                <h2>
                  <a name="solarduino"></a>Le Solarduino</h2>
                <hr>
                <ul class="row gallery">
                  <li class="col-xs-6 col-xs-offset-3">
                    <img class="img-responsive" src="./assets/images/solarduino_v1.jpg">
                  </li>
                </ul>
                <p class="subtitle">Figure : premier prototype du Solarduino soudé sur une plaque à pastilles.</p>
                <p>Nous avons développé une régulation open-source, peu coûteuse qui permet de remplacer les régulations propriétaires du commerce : le Solarduino. Basée sur le travail de <a class="ref" href="#references">Bioulez (2012)</a>, elle se place
                  en complément d'une autre régulation open-source créée par <a class="ref" href="#references">Nies (2009)</a> : le Minisun.</p>
                <p>Voici un tableau comparant le Solarduino à une partie des régulations existantes. Les prix prennent en compte deux sondes de température et sont basés sur le groupement d'achat de l'APPER, disponible <a href="http://www.apper-solaire.org/Pages/Groupement/tarif/tarif/index.htm">ici</a>.</p>
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>Nom</th>
                      <th>Coût</th>
                      <th>Nb. de </br>sondes</th>
                      <th>Nb. de </br>relais</th>
                      <th>Régulation </br>d'une chaudière</br>externe</th>
                      <th>Program-</br>mable</th>
                      <th>Open-</br>Source</th>
                      <th>Référence</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th scope="row">MINISUN</th>
                      <td>45 €</td>
                      <td>2</td>
                      <td>1</td>
                      <td>non</td>
                      <td>non</td>
                      <td>oui</td>
                      <td><a href="http://www.apper-solaire.org/Pages/Electronique/Electro/minisun/Doc_minisun.pdf">lien</a></td>
                    </tr>
                    <tr>
                      <th scope="row">SOLARDUINO</th>
                      <td>
                        <strong>85 €</strong>
                      </td>
                      <td>
                        <strong>6</strong>
                      </td>
                      <td>
                        <strong>6</strong>
                      </td>
                      <td>
                        <strong>oui</strong>
                      </td>
                      <td>
                        <strong>oui</strong>
                      </td>
                      <td>
                        <strong>oui</strong>
                      </td>
                      <td>
                        <strong>ce site</strong>
                      </td>
                    </tr>
                    <tr>
                      <th scope="row">PICO 400</th>
                      <td>90 €</td>
                      <td>2</td>
                      <td>1</td>
                      <td>non</td>
                      <td>non</td>
                      <td>non</td>
                      <td><a href="http://www.solaire-panneau-thermique.com/documentation/12_notice_controleur_solaire_thermique_pico400.pdf">lien</a></td>
                    </tr>
                    <tr>
                      <th scope="row">BASIC</th>
                      <td>130 €</td>
                      <td>2</td>
                      <td>1</td>
                      <td>non</td>
                      <td>non</td>
                      <td>non</td>
                      <td><a href="http://www.apper-solaire.org/Pages/Groupement/basic_energy.pdf">lien</a></td>
                    </tr>
                    <tr>
                      <th scope="row">VISION+</th>
                      <td>215 €</td>
                      <td>6</td>
                      <td>3</td>
                      <td>oui</td>
                      <td>non</td>
                      <td>non</td>
                      <td><a href="http://www.apper-solaire.org/Pages/Groupement/vision.pdf">lien</a></td>
                    </tr>
                    <tr>
                      <th scope="row">GENIUS+</th>
                      <td>385 €</td>
                      <td>9</td>
                      <td>6</td>
                      <td>oui</td>
                      <td>oui</td>
                      <td>non</td>
                      <td><a href="http://www.apper-solaire.org/Pages/Groupement/genius.pdf">lien</a></td>
                    </tr>
                    <tr>
                      <th scope="row">MILLENIUM3</th>
                      <td>625 €</td>
                      <td>12</td>
                      <td>8</td>
                      <td>oui</td>
                      <td>oui</td>
                      <td>non</td>
                      <td>voir note <a class="ref" href="#notes">[1]</a></td>
                    </tr>
                  </tbody>
                </table>
                <h2>
                  <a name="sch"></a>Le schéma</h2>
                <hr>
                <p>Voici le schéma électronique du Solarduino. Il y a quatre parties distinctes dans le système :
                  <ol>
                    <li>
                      <strong>L'alimentation</strong> permet de fournir une tension stable aux trois autres parties. Elle fournit deux tensions : 12 Vcc (volts en courant continu) et 5 Vcc.</li>
                    <li>
                      <strong>L'interface des sondes</strong> permet d'utiliser des sondes de température classiques : des KTY81-210. Ces sondes sont des compsants dont la résistance varie avec la température. Plus il fait chaud, plus leur résistance augmente.
                      En la mesurant, on peut donc connaitre la température du milieu dans lequel les sondes sont positionnées.</li>
                    <li>
                      <strong>La commande des relais</strong> permet d'utiliser des.. relais. Les relais sont des interrupteur commandables. Lorsque l'arduino donne l'ordre de mettre en route un circulateur ou de modifier la position d'une vanne trois voies,
                      l'un des relais ferme le circuit correspondant.</li>
                    <li>
                      <strong>L'arduino</strong> est un microcontrolleur open-source. Ses plans de fabrication sont disponibles <a href="https://www.arduino.cc/en/Main/ArduinoBoardUno">ici</a>. Son principe de fonctionnement est le suivant : on commence par le
                      brancher à un ordinateur. À partir de cet ordinateur, on lui transfère un code. On débranche ensuite l'arduino pour le mettre en place. Une fois allumé, l'arduino exécute en boucle le code qui a été transféré. On peut ainsi lui faire
                      exécuter des taches complexes à notre place.</li>
                  </ol>
                  Le schéma a été réalisé grâce à logiciel open-source : KiCAD, disponible <a href="http://www.kicad-pcb.org/ ">ici</a>.
                </p>
                <img src="./assets/images/solarduino_schema_V1.png" class="img-responsive" alt="Responsive image" />

                <h2>
                  <a name="choix"></a>Les choix constructifs</h2>
                <hr>
                <h3>
                  <a name="alim"></a>L'alimentation</h3>
                <img src="./assets/images/alim_solarduino_2.png" class="img-responsive" alt="Responsive image" />
                <!-- TODO : remplacer les i par les vrai nums -->
                <p>Calcul et choix des composants :</p>
                <ol>
                  <li>
                    <strong>Le fusible et la varistance :</strong> Le circuit est protégé des sur-intensités grâce au fusible et la varistance le protège des sur-tensions. Il faut choisir un fusible de type
                    <em>rapide</em> pour qu'il grille avant le reste du circuit en cas de sur-intensité.</li>
                  <li>
                    <strong>Le transformateur :</strong> Il a été choisi pour obtenir du \(15 Vca\) soit, en amplitude \(15\sqrt{2}V\) . En effet, le régulateur de tension à besoin d'une tension supérieure à sa tension de régulation pour pouvoir fonctionner correctement.
                    Les données constructeur indiquent \(V_{min}=14.5V\) . Ensuite, le pont de diode redresse le signal de sorte qu'il double sa fréquence \(f=50Hz\) et les diodes provoquent une chute de tension de \(1.4V\) . L'amplitude maximale du signal
                    arrivant aux bornes du condensateur vaut donc \(V_{in}=15\sqrt{2}-1.4\)</li>
                  <li>
                    <strong>La capacité réservoir :</strong> pour que la tension aux bornes du régulateur ne diminue pas en dessous de \(V_{min}\) , il faut choisir la capacitance \(C_{1}\) telle que : \(C_{1}=I_{max}/2f(V_{in}-V_{min})\) soit \(C_{1}=700\mu
                    F\) . En pratique, le condensateur choisi est de type électrolytique et possède une capacitance de \(1000\mu F\) pouvant fonctionner jusqu'à 50 Vcc.</li>
                  <li>
                    <strong>Le régulateur de tension 12 Vcc :</strong> le régulateur choisi est de type L7812CV parce qu'il supporte des courant allant jusqu'à 1.5 A, ce qui suffit largement ici.</li>
                  <li>Contrairement à la solution de Bioulez (2013), il a été choisi de ne pas utiliser un régulateur de tension 9 Vcc, mais de mettre à la place un régulateur 5 Vcc et d'alimenter directement l'arduino sans passer par son régulateur interne.
                    En effet, le courant maximal consommé par l'arduino est de \(I_{max}=60mA\) donc la puissance d'échauffement vaut \(P_{\acute{e}chauff}=(9-5)*I_{max}\) soit \(P_{\acute{e}chauff}=420mW\) . Or, d'après les données constructeur, la résistance
                    thermique du régulateur interne de l'arduino vaut 160 °C/W donc celui ci s'échauffera de 21°C. C'est acceptable pour une carte de prototypage, mais dans l'optique de créer une carte robuste, il vaut mieux limiter l'échauffement des
                    composants. De plus, ce changement ne rajoute aucun surcoût.</li>
                  <li>
                    <strong> Les condensateurs de filtrage :</strong> les données constructeur indiquent l'utilisation d'un condensateur de capacitance \(C_{3}=0.1\mu F\) pour lisser les oscillation en sortie du régulateur. Un condensateur \(C_{2}=100\mu F\) a
                    aussi été rajouté en entrée pour atténuer les fluctuations liées aux relais.</li>
                </ol>
                <h3>
                  <a name="sondes"></a>L'interface des sondes</h3>
                <ul class="row gallery">
                  <li class="col-xs-10 col-xs-offset-1">
                    <img src="./assets/images/interface_sonde.png" class="img-responsive" alt="Responsive image" />
                  </li>
                </ul>


                <p>Calcul et choix des composants :</p>
                <ol>
                  <li>
                    <strong>Les sondes :</strong> on utilise des sondes de type KTY81-210 parce qu'elles ont une bonne sensiblilité aux variations de température. Les données constructeur indiquent qu'elles sont utilisables entre -55°C et 150°C et qu'entre ces
                    deux valeurs leur résistance varie entre \(980\Omega\) et \(4280\Omega\)</li>
                  <li>
                    <strong>Le condensateur \(C_{i}\) :</strong> il permet de réaliser un filtre passe-bas avec la résistance \(R_{3}\). La constante de temps de ce filtre vaut \(\tau=R_{i}C_{i}=0.024s\) soit une fréquence de coupure égale à \(f_{c}=\tfrac{1}{2\pi
                    R_{i} C_{i}}=6.6 Hz\). Ainsi, toutes les fréquences supérieures à \(f_{c}\) seront atténuées.</li>
                  <li>
                    <strong>La résistance \(R_{i}\) :</strong> Celle-ci permet de réaliser un pont diviseur de tension tel que la tension mesurée par l'arduino \(V_{analog}\) corresponde à \(V_{analog}=\frac{R_{sonde}}{R_{sonde}+R_{i}}\), d'où \(V_{analog} \in
                    [1.45 ; 3.20 V]\) pour \(R_{i}=2,4k\Omega\). On obtient ainsi une plage de variation de 1,75V. Les ports de mesure de l'arduino acceptent des tensions entre 0 et 5 Vcc qu'ils transforment en 1024 points (10 bits). Ainsi, les 205 °C
                    de variation permises par les sondes sont codées sur 358 bits, d'où une précision de 0,6°C/bit.</li>
                </ol>
                <h3>
                  <a name="relais"></a>La commande des relais</h3>
                <img src="./assets/images/commande_relais.png" class="img-responsive" alt="Responsive image" />

                <p>Calcul et choix des composants :</p>
                <ol>
                  <li>
                    <strong>Les relais :</strong> ce sont des interrupteurs commandés. On utilise des relais Finder de type 40.61 parce qu'ils sont commandables en 12 Vcc et qu'on peut les utiliser dans un circuit de puissance sous 230 Vca et 16A. C'est très
                    largement suffisant pour controler le fonctionnement d'un circulateur ou d'une vanne 3 voies.</br>
                    Ils possèdent une résistance interne de \(R_{relais} = 220\Omega\) et demandent une puissance minimale de 500 mW pour être commandés.</li>
                  <li>
                    <strong>Le transistor et la résistance \(R_{i}\) :</strong> d'après les données constructeur, les sorties de l'arduino peuvent fournir \(I_{max} = 40 mA\) sous 5 V, soit 200 mW de puissance. Il est donc impossible pour ces sortie de commander
                    un relais sans être amplifiées. Un transistor peut être utilisé pour amplifier la puissance de ces sorties.</br>
                    Si on note \(I_{c}\) le courant circulant entre le collecteur et l'émetteur du transistor et \(V_{relais}\) la tension d'alimentation des relais, il faut choisir un transistor capable de supporter un courant \(I_{c} = \frac{V_{relais}}{R_{relais}} = 55
                    mA\).
                    </br>
                    Si on note \(V_{ceo}\) la tension maximale supportée par le transistor, il faut que \(V_{ceo} \gg V_{relais}\).</br>
                    Si on note \(I_{arduino}\) la tension en sortie de l'arduino et \(h_{fe}\) le gain en courant du transistor tel que \(I_{c}=h_{fe} I_{arduino}\), il faut que \(I_{arduino} = \frac{I_c}{h_{fe}} \leq I_{max}\).</br>
                    En choisissant \(R_{i} = 20 k\Omega\) et un transistor de type BC547C, on obtient \(I_{c_{max}} = 100 mA\), \(V_{ceo} = 45V\), \(h_{fe}=220\) et \(I_{arduino} = 0,25 mA\). Donc tout est OK.</li>
                  <li>
                    <strong>Diodes :</strong> on fait passer un courant \(I_{c}\) dans la bobine tel que \(V_{L}=-L \frac{dI_{c} }{dt} \). Ainsi, une variation brusque de \(I_{c}\) créera une tension importante aux bornes de la bobine. Cette tension risque de
                    dépasser \(V_{ceo}\) et de détruire le transistor. C'est pourquoi on ajoute une diode pour protéger le transistor. </br>
                    On choisit une diode de type 1N4007 parce que c'est un composant classique, facile à trouver, qui supporte jusqu'à 1000 V de tension.</li>
                </ol>
                <h3>
                  <a name="relais"></a>L'arduino</h3>
                <ul class="row gallery">
                  <li class="col-xs-6 col-xs-offset-3">
                    <img src="./assets/images/arduino.png" class="img-responsive" alt="Responsive image" />
                  </li>
                </ul>
                <p>Le microcontrolleur utilisé est un arduino Uno, dont les caractéristiques sont disponibles <a href="https://www.arduino.cc/en/Main/ArduinoBoardUno">ici</a>. Peu cher, open-source, robuste, il permet d'interfacer 6 sondes de température
                  et de commander 14 relais. D'autres versions, comme <a href="https://www.arduino.cc/en/Main/ArduinoBoardMega2560">l'arduino Mega2560</a> permettent d'interfacer plus de sondes et de commander plus de relais.</p>
              </div>
              <hr>
              <h3>
                <a name="notes"></a>Notes</h3>
              <div class="EndFoot">
                <ol>
                    <li>Un API MILLENIUM 3 avec 12 entrées et 8 sorties coûte <a href="http://www.conrad.com/ce/en/product/196941/Crouzet-Millenium-3-CD20-R-230VAC-SMART-Expandable-Logic-Controller-88974053">235€</a> ; le cable d'interfaçage <a href="http://www.conrad.com/ce/en/product/197107/Crouzet-PROGUSB-Millenium-3-USB-PC-connection-cable-3-m/?ref=detview1&rt=detview1&rb=1">105€</a> ; le logiciel <a href="http://www.conrad.com/ce/en/product/197249/Crouzet-M3-SOFT-Millenium-3-Programming-Logic-Software?ref=searchDetail">70€</a> ; les convertisseurs pour sondes de température <a href="http://ex-en.alliedelec.com/crouzet-automation-88950150/70158912/">100€ ($110)</a> l'unité.</li>
                </ol>
              </div>

              <h3>
                <a name="references"></a>Références</h3>
              <div class="EndFoot">
                <ol>
                  <li>Bioulez, 2013.
                    <em>Pilotage d'une installation solaire avec microcontroleur ARDUINO</em>. Disponible <a href="http://www.apper-solaire.org/Pages/Electronique/Electro/Pilotage%20installation%20solaire%20par%20arduino/index.pdf">ici</a>.
                  </li>
                  <li>Nies, 2009.
                    <em>Thermostat différentiel avec réglage d'hystérésis</em>. Disponible <a href="http://www.apper-solaire.org/Pages/Electronique/Electro/minisun/Doc_minisun.pdf">ici</a>.
                  </li>
                </ol>

              </div>
              <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-body">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="navigation-box">
            <h2>Navigation</h2>
            <div id="navigation">
              <ul class="nav nav-pills nav-stacked">
                <li class="level1">
                  <a href="./index.html">Accueil</a>
                </li>
                <li class="level1">
                  <a href="./poeles_de_masse.html">Les poêles de masse</a>
                </li>
                <li class="level2">
                  <a href="./batchrocket.html">Le Batchrocket</a>
                </li>
                <li class="level2">
                  <a href="./batchrocket_dimensionnement.html">Le dimensionnement</a>
                </li>
                <li class="level2">
                  <a href="./batchrocket_cloche.html">Les cloches</a>
                </li>
                <li class="level2">
                  <a href="./batchrocket_realisations.html">Nos réalisations</a>
                </li>
                <li class="level1">
                  <a href="./solaire_thermique.html">Le solaire thermique</a>
                </li>
                <li class="level2">
                  <a href="./SST.html">Les SST</a>
                </li>
                <li class="level2">
                  <a href="./etat_lieux.html">Un état des lieux</a>
                </li>
                <li class="level2 active">
                  <a href="./solarduino.html">Le solarduino</a>
                </li>
                <li class="level2">
                  <a href="./logiciel.html">Un logiciel de dimensionnement</a>
                </li>
                <li class="level1">
                  <a href="./a_propos.html">À propos</a>
                </li>
              </ul>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <div id='footer'>
    <div id='footer-inner'>
      <div class='container'>
        <div class='row'>
          <div class='col-sm-12'>
            <div class='footer-text'>
              Ce site est géré par Uzume. Les textes sont écrits par Yasin GACH, sauf mention contraire.
              <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;" src="./assets/images/88x31.png" /></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
